<Window
    x:Class="NavigationSection.VerDisfrazWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:NavigationSection"
    xmlns:models="using:NavigationSection.Model"
    Title="Detalle del disfraz">

    <ScrollViewer>
        <Grid x:Name="RootGrid">
            <Grid Padding="24" RowSpacing="24" x:Name="VistaDetalle" Background="White" 
                  Visibility="Visible">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- =================== CONTENEDOR PRINCIPAL =================== -->
                <Grid ColumnSpacing="24">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*" MinWidth="400"/>
                        <ColumnDefinition Width="1.5*" MinWidth="360"/>
                    </Grid.ColumnDefinitions>

                    <!-- ===== COLUMNA IZQUIERDA ===== -->
                    <StackPanel Grid.Column="0" Spacing="24">

                        <!-- Imagen + Info Principal -->
                        <Grid ColumnSpacing="24">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Imagen del disfraz -->
                            <Border
                                Grid.Column="0"
                                Width="220"
                                Height="300"
                                Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}"
                                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                BorderThickness="1">
                                <Image
                                    Source="{x:Bind Disfraz.Imagen}"
                                    Stretch="UniformToFill"/>
                            </Border>

                            <!-- InformaciÃ³n del disfraz -->
                            <StackPanel Grid.Column="1" Spacing="16" VerticalAlignment="Top">

                                <TextBlock
                                    Text="{x:Bind Disfraz.Nombre}"
                                    FontSize="28"
                                    FontWeight="SemiBold"
                                    TextWrapping="Wrap"
                                    MaxLines="2"/>

                                <Border
                                    Padding="12,6"
                                    CornerRadius="8"
                                    Background="{x:Bind Disfraz.GeneroColor}"
                                    HorizontalAlignment="Left">
                                    <TextBlock
                                        Text="{x:Bind Disfraz.GeneroTexto}"
                                        Foreground="White"
                                        FontSize="13"
                                        FontWeight="SemiBold"/>
                                </Border>

                                <TextBlock
                                    Text="{x:Bind Disfraz.Descripcion}"
                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                    FontSize="14"
                                    TextWrapping="Wrap"
                                    LineHeight="20"
                                    MaxLines="6"/>

                                <!-- Precios -->
                                <Grid ColumnSpacing="24" Margin="0,8,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <Border
                                        Grid.Column="0"
                                        Padding="8,6"
                                        Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}">
                                        <StackPanel Spacing="4">
                                            <TextBlock 
                                                Text="Alquiler"
                                                FontSize="12"
                                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                            <TextBlock
                                                Text="{x:Bind Disfraz.PrecioAlquiler}"
                                                FontSize="15"
                                                FontWeight="SemiBold"/>
                                        </StackPanel>
                                    </Border>

                                    <Border
                                        Grid.Column="1"
                                        Padding="8,6"
                                        Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}">
                                        <StackPanel Spacing="4">
                                            <TextBlock 
                                                Text="Venta"
                                                FontSize="12"
                                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                            <TextBlock
                                                Text="{x:Bind Disfraz.PrecioVenta}"
                                                FontSize="15"
                                                FontWeight="SemiBold"/>
                                        </StackPanel>
                                    </Border>
                                </Grid>
                            </StackPanel>
                        </Grid>

                        <!-- ===== DISPONIBILIDAD POR TALLA ===== -->
                        <Border
                            Padding="20"
                            CornerRadius="16"
                            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                            BorderThickness="1">

                            <StackPanel Spacing="16">
                                <TextBlock
                                    Text="Disponibilidad por talla"
                                    FontSize="18"
                                    FontWeight="SemiBold"/>

                                <Grid ColumnSpacing="16" RowSpacing="12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </StackPanel>

                    <!-- ===== COLUMNA DERECHA: PRENDAS ===== -->
                    <Border
                        Grid.Column="1"
                        Padding="20"
                        CornerRadius="16"
                        Background="#F5F5F5"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                        BorderThickness="1">

                        <StackPanel Spacing="16">
                            <TextBlock
                                Text="Partes de la Vestimenta"
                                FontSize="18"
                                FontWeight="SemiBold"/>

                            <ScrollViewer MaxHeight="600" VerticalScrollBarVisibility="Auto">
                                <Grid
                                   RowDefinitions="Auto,*"
                                   RowSpacing="5">
                                    <GridView
                                    Grid.Row="0"
                                    ItemsSource="{x:Bind PrendasDisfraz}"
                                    SelectionMode="Single"
                                    ItemClick="ListaPrenda_Click"
                                    IsItemClickEnabled="True">

                                        <GridView.ItemTemplate>
                                            <DataTemplate x:DataType="models:Prenda">
                                                <Grid Width="140" Height="170">
                                                    <Border
                                                    Background="White"
                                                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                                    BorderThickness="1">
                                                        <Grid>
                                                            <Image
                                                            Source="{x:Bind Imagen}"
                                                            Stretch="UniformToFill"
                                                            VerticalAlignment="Top"/>

                                                            <Border
                                                            Height="48"
                                                            VerticalAlignment="Bottom"
                                                            Background="#CC000000"
                                                            Padding="10,8">
                                                                <TextBlock
                                                                Text="{x:Bind Nombre}"
                                                                Foreground="White"
                                                                FontSize="13"
                                                                FontWeight="SemiBold"
                                                                TextTrimming="CharacterEllipsis"
                                                                TextWrapping="Wrap"
                                                                MaxLines="2"
                                                                VerticalAlignment="Center"/>
                                                            </Border>
                                                        </Grid>
                                                    </Border>
                                                </Grid>
                                            </DataTemplate>
                                        </GridView.ItemTemplate>

                                        <GridView.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <ItemsWrapGrid 
                                                Orientation="Horizontal"
                                                ItemWidth="150" 
                                                ItemHeight="180"
                                                HorizontalAlignment="Left"/>
                                            </ItemsPanelTemplate>
                                        </GridView.ItemsPanel>
                                    </GridView>
                                    <!-- Boton para agregar una prenda -->
                                    <Button 
                                        Grid.Row="1" 
                                        Content="Agregar prenda" 
                                        Click="Click_AgregarPrenda"
                                        HorizontalAlignment="Right"
                                        Margin="20"/>
                                </Grid>
                            </ScrollViewer>
                        </StackPanel>
                    </Border>
                </Grid>
            </Grid>

            <Grid Padding="24" RowSpacing="24" x:Name="VistaAgregarPrenda"
                  Background="White" Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Button 
                    Grid.Row="0"
                    Content="Regresar"
                    Width="120"
                    Click="Click_Regresar"
                    />
                <!-- El tree e imagenes de las prendas -->
                <Grid Grid.Row="1" >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="300"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- SelectionChanged="CategoriaPrenda_SelectionChanged" -->
                    <TreeView
                        Background="Beige"
                        x:Name="TreeCategorias" 
                        ItemsSource="{x:Bind CategoriasPrendas, Mode=OneWay}"
                        Grid.Column="0"
                        SelectionChanged="CategoriaPrenda_SelectionChanged">
                        <TreeView.ItemTemplate>
                            <DataTemplate x:DataType="local:ExplorerItem">
                                <TreeViewItem ItemsSource="{x:Bind Children}" Content="{x:Bind Name}"/>
                            </DataTemplate>
                        </TreeView.ItemTemplate>
                    </TreeView>
                    
                    <GridView
                        Grid.Column="1"
                        x:Name="ListaPrendasBusqueda"
                        IsItemClickEnabled="True"
                        SelectionMode="None"
                        ItemClick="ListaPrendasBusqueda_ItemClick">

                        
                        <GridView.ItemTemplate>
                            <DataTemplate x:DataType="models:Prenda">
                                <Grid Width="140" Height="170">
                                    <Border
                                                Background="White"
                                                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                                BorderThickness="1">
                                        <Grid>
                                            <Image
                                                Source="{x:Bind Imagen}"
                                                Stretch="UniformToFill"
                                                VerticalAlignment="Top"/>

                                            <Border
                                                Height="48"
                                                VerticalAlignment="Bottom"
                                                Background="#CC000000"
                                                Padding="10,8">
                                                <TextBlock
                                                Text="{x:Bind Nombre}"
                                                Foreground="White"
                                                FontSize="13"
                                                FontWeight="SemiBold"
                                                TextTrimming="CharacterEllipsis"
                                                TextWrapping="Wrap"
                                                MaxLines="2"
                                                VerticalAlignment="Center"/>
                                            </Border>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </DataTemplate>
                        </GridView.ItemTemplate>

                        <GridView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <ItemsWrapGrid 
                                    Orientation="Horizontal"
                                    ItemWidth="150" 
                                    ItemHeight="180"
                                    HorizontalAlignment="Left"/>
                            </ItemsPanelTemplate>
                        </GridView.ItemsPanel>
                    </GridView>
                </Grid>
        </Grid>
        </Grid>
    </ScrollViewer>
</Window>
